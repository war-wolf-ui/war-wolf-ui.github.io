webpackJsonp([3],{"/QV0":function(e,t){},Cdx3:function(e,t,i){var n=i("sB3e"),a=i("lktj");i("uqUo")("keys",function(){return function(e){return a(n(e))}})},dxs2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("sj0j"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"h-headtitle"},[e._v("获取视频第一帧图片")]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"h-blocks"},[i("div",{staticClass:"h-title"},[e._v("基础用法")]),e._v(" "),i("div",{staticClass:"hb-a"},[i("input",{attrs:{type:"file",id:"upload-ipt",accept:"video/*"},on:{change:function(t){return e.chooseVideoGetFirstFrameImg(t,{videoDivId:"vId",picWidth:500,picHei:300})}}}),e._v(" "),i("div",{staticStyle:{width:"500px",height:"300px",border:"1px solid #ccc","margin-top":"10px"},attrs:{id:"vId"}}),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[e._v("第一帧图片展示")]),e._v(" "),i("div",{staticStyle:{width:"500px",height:"auto"}},[i("img",{attrs:{src:e.firstImgUrl,width:"100%"}})])]),e._v(" "),i("div",{staticClass:"hb-code"},[i("div",{staticClass:"hb-cmain"},[i("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._m(1)])])]),e._v(" "),i("div",{staticClass:"hb-b view-code-btn"},[e._v("查看代码")])]),e._v(" "),i("div",{staticClass:"h-blocks"},[i("div",{staticClass:"h-title"},[e._v("属性")]),e._v(" "),i("div",{staticClass:"hb-a"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"param",label:"参数",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"说明",width:"380"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),i("el-table-column",{attrs:{prop:"defaultVal",label:"默认值"}})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"h-blocks"},[t("div",{staticClass:"h-title"},[this._v("介绍")]),this._v(" "),t("div",{staticClass:"h-main"},[this._v("\n            用于获取视频第一帧图片，最终图片是base64格式。\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("pre",[this._v("                        "),t("code",[this._v('\n                    //定义一个file类型按钮\n                    <input type="file" id="upload-ipt"\n                           @change="chooseVideoGetFirstFrameImg($event,{videoDivId:\'vId\',picWidth:500,picHei:300})"\n                           accept="video/*" />\n                    //定义一个div并且加上id，也可以用其它标签，有个id就行,用于创建video标签时候存放,不要展示时候，可以灵活隐藏掉\n                    <div id="vId"></div>\n                    <div>第一帧图片展示</div>\n                    <div>\n                    <img :src="firstImgUrl" width="100%" />\n                    </div>\n                    //主要方法\n                    chooseVideoGetFirstFrameImg(e,obj) {\n                        let self = this;\n                        //逻辑判断，防止少传\n                        if(Object.keys(arguments[1]).length < 3){\n                            console.log(\'缺少参数\');\n                            return;\n                        }\n                        if(!obj.videoDivId){\n                            console.log(\'请传videoDivId\');\n                            return;\n                        }\n                        if(!obj.picWidth){\n                            console.log(\'请传picWidth\');\n                            return;\n                        }\n                        if(!obj.picHei){\n                            console.log(\'请传picHei\');\n                            return;\n                        }\n                        let files = e.target.files[0];//获取文件\n                        let blob = new Blob([files]); // 文件转化成二进制文件\n                        let url = URL.createObjectURL(blob); //转化成url\n                        let parent = document.getElementById(obj.videoDivId);\n                        let div = document.createElement("div");\n                        div.setAttribute("class", "newDivVideo");\n                        parent.appendChild(div);\n                        document.querySelector(\'.newDivVideo\').innerHTML = \'<video controls src="\'+url+\'" id="videoId" width="100%" height="100%" autoplay></video>\';\n                        let videoElement = document.querySelector(\'#videoId\');\n                        videoElement.addEventListener("canplay", function() {\n                            let canvas = document.createElement("canvas");\n                            canvas.width = obj.picWidth;\n                            canvas.height = obj.picHei;\n                            canvas.getContext("2d").drawImage(videoElement, 0, 0, canvas.width, canvas.height);\n                            let outImgUrl = canvas.toDataURL("image/png");\n                            console.log(outImgUrl); //第一帧图片url\n                            self.getImg(outImgUrl); //业务逻辑处理\n                        })\n                    },\n                    getImg(data){\n                        this.firstImgUrl = data;\n                    }\n                        ')]),this._v("\n                    ")])}]};var d=function(e){i("/QV0")},o=i("VU/8")(n.a,a,!1,d,"data-v-57085a30",null);t.default=o.exports},fZjL:function(e,t,i){e.exports={default:i("jFbC"),__esModule:!0}},jFbC:function(e,t,i){i("Cdx3"),e.exports=i("FeBl").Object.keys},sj0j:function(e,t,i){"use strict";(function(e){var n=i("fZjL"),a=i.n(n);t.a={name:"",data:function(){return{firstImgUrl:"",tableData:[{param:"videoDivId",desc:"定义一个div并且加上id，也可以用其它标签，有个id就行,用于创建video标签时候存放",type:"String",defaultVal:""},{param:"picWidth",desc:"截图第一帧图片的宽度",type:"Number",defaultVal:""},{param:"picHei",desc:"截图第一帧图片的高度",type:"Number",defaultVal:""}]}},mounted:function(){this.doCode()},methods:{doCode:function(){e(".view-code-btn").click(function(){e(this).parent().find(".hb-code").slideToggle()})},chooseVideoGetFirstFrameImg:function(e,t){var i=this;if(a()(arguments[1]).length<3)console.log("缺少参数");else if(t.videoDivId)if(t.picWidth)if(t.picHei){var n=e.target.files[0],d=new Blob([n]),o=URL.createObjectURL(d),l=document.getElementById(t.videoDivId),c=document.createElement("div");c.setAttribute("class","newDivVideo"),l.appendChild(c),document.querySelector(".newDivVideo").innerHTML='<video controls src="'+o+'" id="videoId" width="100%" height="100%" autoplay></video>';var s=document.querySelector("#videoId");s.addEventListener("canplay",function(){var e=document.createElement("canvas");e.width=t.picWidth,e.height=t.picHei,e.getContext("2d").drawImage(s,0,0,e.width,e.height);var n=e.toDataURL("image/png");console.log(n),i.getImg(n)})}else console.log("请传picHei");else console.log("请传picWidth");else console.log("请传videoDivId")},getImg:function(e){this.firstImgUrl=e}},components:{}}}).call(t,i("7t+N"))},uqUo:function(e,t,i){var n=i("kM2E"),a=i("FeBl"),d=i("S82l");e.exports=function(e,t){var i=(a.Object||{})[e]||Object[e],o={};o[e]=t(i),n(n.S+n.F*d(function(){i(1)}),"Object",o)}}});
//# sourceMappingURL=3.10045fbbf6440763510f.js.map