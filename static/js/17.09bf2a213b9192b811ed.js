webpackJsonp([17],{"7oYR":function(n,e,t){"use strict";(function(n){e.a={name:"wltxtlinkhref",data:function(){return{}},mounted:function(){this.doCode()},methods:{doCode:function(){n(".view-code-btn").click(function(){n(this).parent().find(".hb-code").slideToggle()})}},components:{}}}).call(e,t("7t+N"))},LDYd:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("7oYR"),s={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"wl-txtlinkhref"},[t("div",{staticClass:"h-headtitle"},[n._v("跨端支付，APP跳支付宝/微信小程序支付")]),n._v(" "),n._m(0),n._v(" "),t("div",{staticClass:"h-blocks"},[t("div",{staticClass:"h-title"},[n._v("一、APP端跳支付宝小程序支付")]),n._v(" "),t("div",{staticClass:"hb-a"},[n._v("1.APP端准备跳转的代码")]),n._v(" "),t("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n._m(1)]),n._v(" "),t("div",{staticClass:"hb-a"},[n._v("2.支付宝小程序接受参数并发起支付")]),n._v(" "),t("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n._m(2)])]),n._v(" "),t("div",{staticClass:"h-blocks"},[t("div",{staticClass:"h-title"},[n._v("二、APP端跳微信小程序支付")]),n._v(" "),t("div",{staticClass:"hb-a"},[n._v("1.APP端准备跳转的代码")]),n._v(" "),t("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n._m(3)]),n._v(" "),t("div",{staticClass:"hb-a"},[n._v("2.微信小程序接受参数并发起支付")]),n._v(" "),t("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n._m(4)])])])},staticRenderFns:[function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"h-blocks"},[e("div",{staticClass:"h-title"},[this._v("介绍")]),this._v(" "),e("div",{staticClass:"h-main"},[this._v("跨端支付场景注意是APP端到支付宝小程序、微信小程序端支付的场景，因为公司定制业务需要！一下是uniapp一端生成的代码！")])])},function(){var n=this.$createElement,e=this._self._c||n;return e("pre",[this._v("                "),e("code",[this._v("\n                  //判断操作系统 ios,android\n                  let osName = JSON.parse(uni.getStorageSync('systemInfo')).osName;\n                  let goUrl = 'pages-orderPay/payForApp/payForApp'; //支付宝小程序处理支付的地址\n                  //传的参数，估计具体业务来，但一定要encodeURIComponent\n                  let querys = encodeURIComponent(`key=${dparam.orderCode}&paySource=1`);\n                  //判断操作系统\n                  //特别注意：ios和android的跳转协议不一样\n                  // ios:alipay\n                  // android:alipays\n                  //appId 支付宝小程序id\n                  if(osName == 'ios'){\n                    plus.runtime.openURL(`alipay://platformapi/startapp?appId=${pageConfig.alipayAPPId}&page=${goUrl}&query=${querys}`,function (res){\n                      uni.showToast({\n                        icon:'none',\n                        title:'请安装支付宝后再进行支付！',\n                      })\n                    });\n                  }else if(osName == 'android'){\n                    plus.runtime.openURL(`alipays://platformapi/startapp?appId=${pageConfig.alipayAPPId}&page=${goUrl}&query=${querys}`,function (res){\n                      uni.showToast({\n                        icon:'none',\n                        title:'请安装支付宝后再进行支付！',\n                      })\n                    });\n                  }\n\n                ")]),this._v("\n            ")])},function(){var n=this.$createElement,e=this._self._c||n;return e("pre",[this._v("              "),e("code",[this._v("\n                //tradeNo 交易号后端接口会返回\n                my.tradePay({\n                    tradeNO: tradeNo,\n                    success: function (resultAli) {\n                      if (resultAli.resultCode == 9000) {\n                        my.showToast({\n                          type: 'success',\n                          content: '支付成功',\n                          duration: 2000,\n                        })\n                      } else {\n                        my.showToast({\n                          type: 'fail',\n                          content: '支付失败 请重试',\n                          duration: 2000,\n                        })\n                      }\n                    },\n                    fail: function (res) {\n                      my.showToast({ type: 'fail', content: '支付服务异常 请退出重试' })\n                    },\n                  })\n              ")]),this._v("\n          ")])},function(){var n=this.$createElement,e=this._self._c||n;return e("pre",[this._v("                "),e("code",[this._v("\n                  plus.share.getServices(function(res){\n                    let sweixin = null;\n                    for(var i=0;i"),this._v(" == 'weixin'){\n                           sweixin = t;\n                       }\n                    }\n                    if(sweixin){\n                      sweixin.launchMiniProgram({\n                        id: 'gh_xxxxx',  //这里写你的小程序原始id（以gh开头）\n                        type: 0,//这里是不同的环境（默认0） 0-正式版； 1-测试版； 2-体验版。 默认值为0。\n                        path:`/pages-orderPay/payForApp/payForApp?key=${dparam.orderCode}&paySource=1`//这里是指定页的路径，paySource 1 从下单页 ，2 开通会员\n                      });\n                    }\n                  },function(res){\n                    console.log(JSON.stringify(res));\n                });\n                ")]),this._v("\n            ")])},function(){var n=this.$createElement,e=this._self._c||n;return e("pre",[this._v("              "),e("code",[this._v("\n                //uniapp支付方法\n                uni.getProvider({\n                  service:'payment',\n                  success:function (resProveder){\n                    //先获取支付服务商\n                    let providerName = resProveder.provider[0];\n                    uni.requestPayment({\n                      provider: providerName,\n                      timeStamp: timeStamp,\n                      nonceStr: nonceStr, //随机串\n                      package: package,\n                      signType: signType, //微信签名方式：\n                      paySign: paySign, //微信签名\n                      success: function (res) {\n                        //调回APP\n                        //支付成功业务处理\n                      },\n                      fail: function (err) {\n                        //调回APP\n                        //支付失败业务处理\n                      }\n                    });\n                  }\n                })\n              ")]),this._v("\n          ")])}]};var a=function(n){t("h3Ty")},r=t("VU/8")(i.a,s,!1,a,"data-v-4764aa23",null);e.default=r.exports},h3Ty:function(n,e){}});
//# sourceMappingURL=17.09bf2a213b9192b811ed.js.map