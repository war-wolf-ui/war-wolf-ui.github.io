webpackJsonp([16],{Aiev:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("iFvd"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wl-txtlinkhref"},[n("div",{staticClass:"h-headtitle"},[t._v("华为云文件直传")]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"h-blocks"},[n("div",{staticClass:"h-title"},[t._v("基础用法")]),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"hb-code",staticStyle:{display:"block"}},[n("div",{staticClass:"hb-cmain"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t._m(2)])])]),t._v(" "),n("div",{staticClass:"hb-b view-code-btn"},[t._v("查看代码")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-blocks"},[e("div",{staticClass:"h-title"},[this._v("介绍")]),this._v(" "),e("div",{staticClass:"h-main"},[this._v("\n            对象存储服务（Object Storage Service）是一款稳定、安全、高效、易用的云存储服务，具备标准Restful API接口，可存储任意数量和形式的非结构化数据！\n        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hb-a"},[e("p",[this._v("通过policy方式，obsFileTransfer方法三个实参：")]),this._v(" "),e("p",[this._v("1.files:文件对象")]),this._v(" "),e("p",[this._v("2.getPolicyUrl:获取策略的地址")]),this._v(" "),e("p",[this._v("3.fn:成功后的回调")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[this._v("                        "),e("code",[this._v('\n                          //华为云obs直传\n                          obsFileTransfer(files, getPolicyUrl, fn) {\n                            //参数说明\n                            //*files Object 文件对象\n                            //getPolicyUrl 获取policy，accessKeyId，host，signature地址，需后台提供\n                            //fn function 上传后回调\n                            if (!files) {\n                              return;\n                            }\n                            if (!KeyType) {\n                              return;\n                            }\n                            if (!getPolicyUrl) {\n                              return;\n                            }\n                            let filesObj = files.target.files[0];\n                            let fileName = files.target.files[0].name;\n                            let getPointLocal = fileName.indexOf(".");\n                            let getHZ = fileName.slice(getPointLocal + 1);\n                            let timeStamp = new Date().getTime();\n                            let newFileName = `f${timeStamp}.${getHZ}`;\n                            let keyVal = "filsObs/xxx"; //文件夹路径 根据具体业务\n\n                            axios.get(getPolicyUrl).then((res) => {\n                                let d = res.data;\n                                let policy = d.data.policy;\n                                let accessKeyId = d.data.accessKeyId;\n                                let signature = d.data.signature;\n                                let hostUrl = d.data.host;\n                                let filePath = `${hostUrl}/${keyVal}`; //文件路径，回调时候返回\n                                if (d.code == "0") {\n                                  let ffData = new FormData();\n                                  ffData.append("key", keyVal);\n                                  ffData.append("x-obs-acl", "public-read");\n                                  ffData.append("content-type", "text/plain");\n                                  ffData.append("policy", policy);\n                                  ffData.append("AccessKeyId", accessKeyId);\n                                  ffData.append("signature", signature);\n                                  ffData.append("file", filesObj);\n                                  axios.post(hostUrl, ffData, {\n                                      headers: {\n                                        Accept: "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3",\n                                        "Content-Type": "multipart/form-data"\n                                      }\n                                    })\n                                    .then((res) => {\n                                      fn(res, filePath);\n                                    })\n                                    .catch((err) => {\n                                      fn(err, filePath);\n                                    });\n                                }\n                              })\n                              .catch((err) => {});\n                          }\n\n                        ')]),this._v("\n                    ")])}]};var s=function(t){n("I+BS")},l=n("VU/8")(i.a,a,!1,s,"data-v-fe4c804c",null);e.default=l.exports},"I+BS":function(t,e){},iFvd:function(t,e,n){"use strict";(function(t){e.a={name:"wltxtlinkhref",data:function(){return{}},mounted:function(){this.doCode()},methods:{doCode:function(){t(".view-code-btn").click(function(){t(this).parent().find(".hb-code").slideToggle()})}},components:{}}}).call(e,n("7t+N"))}});
//# sourceMappingURL=16.ffc9638e91aecd437fc1.js.map